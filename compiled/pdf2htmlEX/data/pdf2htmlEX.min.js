(function(){function k(a,b){return[a[0]*b[0]+a[2]*b[1]+a[4],a[1]*b[0]+a[3]*b[1]+a[5]]}function n(a){for(var b=0,c=a.length;b<c;++b)a[b].addEventListener("dragstart",function(){return!1},!1)}function p(a){for(var b={},c=0,e=arguments.length;c<e;++c){var f=arguments[c],h;for(h in f)f.hasOwnProperty(h)&&(b[h]=f[h])}return b}function q(a){if(a){this.shown=this.loaded=!1;this.page=a;this.num=parseInt(a.getAttribute("data-page-no"),16);this.original_height=a.clientHeight;this.original_width=a.clientWidth;
var b=a.getElementsByClassName(l.page_content_box)[0];b&&(this.content_box=b,this.original_scale=this.cur_scale=this.original_height/b.clientHeight,this.page_data=JSON.parse(a.getElementsByClassName(l.page_data)[0].getAttribute("data-data")),a=this.ctm=this.page_data.ctm,b=a[0]*a[3]-a[1]*a[2],this.ictm=[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[3]*a[4])/b,(a[1]*a[4]-a[0]*a[5])/b],this.loaded=!0)}}function r(a){this.config=p(t,0<arguments.length?a:{});this.pages_loading=[];this.init_before_loading_content();
var b=this;document.addEventListener("DOMContentLoaded",function(){b.init_after_loading_content()},!1)}var u=window.pdf2htmlEX=window.pdf2htmlEX||{},l={page_frame:"pf",page_content_box:"pc",page_data:"pi",background_image:"bi",link:"l",input_radio:"ir",__dummy__:"no comma"},t={container_id:"page-container",sidebar_id:"sidebar",outline_id:"outline",loading_indicator_cls:"loading-indicator",preload_pages:3,render_timeout:100,scale_step:.9,key_handler:!0,hashchange_handler:!0,view_history_handler:!0,
__dummy__:"no comma"};q.prototype={hide:function(){this.loaded&&this.shown&&(this.content_box.classList.remove("opened"),this.shown=!1)},show:function(){this.loaded&&!this.shown&&(this.content_box.classList.add("opened"),this.shown=!0)},rescale:function(a){this.cur_scale=0===a?this.original_scale:a;this.loaded&&(a=this.content_box.style,a.msTransform=a.webkitTransform=a.transform="scale("+this.cur_scale.toFixed(3)+")");a=this.page.style;a.height=this.original_height*this.cur_scale+"px";a.width=this.original_width*
this.cur_scale+"px"},view_position:function(){var a=this.page,b=a.parentNode;return[b.scrollLeft-a.offsetLeft-a.clientLeft,b.scrollTop-a.offsetTop-a.clientTop]},height:function(){return this.page.clientHeight},width:function(){return this.page.clientWidth}};r.prototype={scale:1,cur_page_idx:0,first_page_idx:0,init_before_loading_content:function(){this.pre_hide_pages()},initialize_radio_button:function(){for(var a=document.getElementsByClassName(l.input_radio),b=0;b<a.length;b++)a[b].addEventListener("click",
function(){this.classList.toggle("checked")})},init_after_loading_content:function(){this.sidebar=document.getElementById(this.config.sidebar_id);this.outline=document.getElementById(this.config.outline_id);this.container=document.getElementById(this.config.container_id);this.loading_indicator=document.getElementsByClassName(this.config.loading_indicator_cls)[0];for(var a=!0,b=this.outline.childNodes,c=0,e=b.length;c<e;++c)if("ul"===b[c].nodeName.toLowerCase()){a=!1;break}a||"no"!=getparam(location.href,
"sidebar")&&this.sidebar.classList.add("opened");this.find_pages();if(0!=this.pages.length){n(document.getElementsByClassName(l.background_image));this.config.key_handler&&this.register_key_handler();var f=this;this.config.hashchange_handler&&window.addEventListener("hashchange",function(a){f.navigate_to_dest(document.location.hash.substring(1))},!1);this.config.view_history_handler&&window.addEventListener("popstate",function(a){a.state&&f.navigate_to_dest(a.state)},!1);this.container.addEventListener("scroll",
function(){f.update_page_idx();f.schedule_render(!0)},!1);[this.container,this.outline].forEach(function(a){a.addEventListener("click",f.link_handler.bind(f),!1)});this.initialize_radio_button();this.render()}},find_pages:function(){for(var a=[],b={},c=this.container.childNodes,e=0,f=c.length;e<f;++e){var h=c[e];h.nodeType===Node.ELEMENT_NODE&&h.classList.contains(l.page_frame)&&(h=new q(h),a.push(h),b[h.num]=a.length-1)}this.pages=a;this.page_map=b},load_page:function(a,b,c){var e=this.pages;if(!(a>=
e.length||(e=e[a],e.loaded||this.pages_loading[a]))){var e=e.page,f=e.getAttribute("data-page-url");if(f){this.pages_loading[a]=!0;var h=e.getElementsByClassName(this.config.loading_indicator_cls)[0];"undefined"===typeof h&&(h=this.loading_indicator.cloneNode(!0),h.classList.add("active"),e.appendChild(h));var d=this,g=new XMLHttpRequest;g.open("GET",f,!0);g.onload=function(){if(200===g.status||0===g.status){var b=document.createElement("div");b.innerHTML=g.responseText;for(var e=null,b=b.childNodes,
f=0,h=b.length;f<h;++f){var k=b[f];if(k.nodeType===Node.ELEMENT_NODE&&k.classList.contains(l.page_frame)){e=k;break}}b=d.pages[a];d.container.replaceChild(e,b.page);b=new q(e);d.pages[a]=b;b.hide();b.rescale(d.scale);n(e.getElementsByClassName(l.background_image));d.schedule_render(!1);c&&c(b)}delete d.pages_loading[a]};g.send(null)}void 0===b&&(b=this.config.preload_pages);0<--b&&(d=this,setTimeout(function(){d.load_page(a+1,b)},0))}},pre_hide_pages:function(){var a="@media screen{."+l.page_content_box+
"{display:none;}}",b=document.createElement("style");b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.appendChild(b)},render:function(){for(var a=this.container,b=a.scrollTop,c=a.clientHeight,a=b-c,b=b+c+c,c=this.pages,e=0,f=c.length;e<f;++e){var h=c[e],d=h.page,g=d.offsetTop+d.clientTop,d=g+d.clientHeight;g<=b&&d>=a?h.loaded?h.show():this.load_page(e):h.hide()}},update_page_idx:function(){var a=this.pages,b=a.length;if(!(2>b)){for(var c=this.container,e=
c.scrollTop,c=e+c.clientHeight,f=-1,h=b,d=h-f;1<d;){var g=f+Math.floor(d/2),d=a[g].page;d.offsetTop+d.clientTop+d.clientHeight>=e?h=g:f=g;d=h-f}this.first_page_idx=h;for(var g=f=this.cur_page_idx,k=0;h<b;++h){var d=a[h].page,l=d.offsetTop+d.clientTop,d=d.clientHeight;if(l>c)break;d=(Math.min(c,l+d)-Math.max(e,l))/d;if(h===f&&1E-6>=Math.abs(d-1)){g=f;break}d>k&&(k=d,g=h)}this.cur_page_idx=g}},schedule_render:function(a){if(void 0!==this.render_timer){if(!a)return;clearTimeout(this.render_timer)}var b=
this;this.render_timer=setTimeout(function(){delete b.render_timer;b.render()},this.config.render_timeout)},register_key_handler:function(){var a=this;window.addEventListener("DOMMouseScroll",function(b){if(b.ctrlKey){b.preventDefault();var c=a.container,e=c.getBoundingClientRect(),c=[b.clientX-e.left-c.clientLeft,b.clientY-e.top-c.clientTop];a.rescale(Math.pow(a.config.scale_step,b.detail),!0,c)}},!1);window.addEventListener("keydown",function(b){var c=!1,e=b.ctrlKey||b.metaKey,f=b.altKey;switch(b.keyCode){case 61:case 107:case 187:e&&
(a.rescale(1/a.config.scale_step,!0),c=!0);break;case 173:case 109:case 189:e&&(a.rescale(a.config.scale_step,!0),c=!0);break;case 48:e&&(a.rescale(0,!1),c=!0);break;case 33:f?a.scroll_to(a.cur_page_idx-1):a.container.scrollTop-=a.container.clientHeight;c=!0;break;case 34:f?a.scroll_to(a.cur_page_idx+1):a.container.scrollTop+=a.container.clientHeight;c=!0;break;case 35:a.container.scrollTop=a.container.scrollHeight;c=!0;break;case 36:a.container.scrollTop=0,c=!0}c&&b.preventDefault()},!1)},rescale:function(a,
b,c){var e=this.scale;this.scale=a=0===a?1:b?e*a:a;c||(c=[0,0]);b=this.container;c[0]+=b.scrollLeft;c[1]+=b.scrollTop;for(var f=this.pages,h=f.length,d=this.first_page_idx;d<h;++d){var g=f[d].page;if(g.offsetTop+g.clientTop>=c[1])break}g=d-1;0>g&&(g=0);var g=f[g].page,k=g.clientWidth,d=g.clientHeight,l=g.offsetLeft+g.clientLeft,m=c[0]-l;0>m?m=0:m>k&&(m=k);k=g.offsetTop+g.clientTop;c=c[1]-k;0>c?c=0:c>d&&(c=d);for(d=0;d<h;++d)f[d].rescale(a);b.scrollLeft+=m/e*a+g.offsetLeft+g.clientLeft-m-l;b.scrollTop+=
c/e*a+g.offsetTop+g.clientTop-c-k;this.schedule_render(!0)},fit_width:function(){var a=this.cur_page_idx;this.rescale(this.container.clientWidth/this.pages[a].width(),!0);this.scroll_to(a)},fit_height:function(){var a=this.cur_page_idx;this.rescale(this.container.clientHeight/this.pages[a].height(),!0);this.scroll_to(a)},get_containing_page:function(a){for(;a;){if(a.nodeType===Node.ELEMENT_NODE&&a.classList.contains(l.page_frame)){a=parseInt(a.getAttribute("data-page-no"),16);var b=this.page_map;
return a in b?this.pages[b[a]]:null}a=a.parentNode}return null},link_handler:function(a){var b=a.target,c=b.getAttribute("data-dest-detail");if(c){if(this.config.view_history_handler)try{var e=this.get_current_view_hash();window.history.replaceState(e,"","#"+e);window.history.pushState(c,"","#"+c)}catch(f){}this.navigate_to_dest(c,this.get_containing_page(b));a.preventDefault()}},navigate_to_dest:function(a,b){try{var c=JSON.parse(a)}catch(v){return}if(c instanceof Array){var e=c[0],f=this.page_map;
if(e in f){for(var h=f[e],e=this.pages[h],f=2,d=c.length;f<d;++f){var g=c[f];if(null!==g&&"number"!==typeof g)return}for(;6>c.length;)c.push(null);var d=b||this.pages[this.cur_page_idx],f=d.view_position(),f=k(d.ictm,[f[0],d.height()-f[1]]),d=this.scale,l=[0,0],n=!0,g=!1,m=this.scale;switch(c[1]){case "XYZ":l=[null===c[2]?f[0]:c[2]*m,null===c[3]?f[1]:c[3]*m];d=c[4];if(null===d||0===d)d=this.scale;g=!0;break;case "Fit":case "FitB":l=[0,0];g=!0;break;case "FitH":case "FitBH":l=[0,null===c[2]?f[1]:c[2]*
m];g=!0;break;case "FitV":case "FitBV":l=[null===c[2]?f[0]:c[2]*m,0];g=!0;break;case "FitR":l=[c[2]*m,c[5]*m],n=!1,g=!0}if(g){this.rescale(d,!1);var p=this,c=function(a){l=k(a.ctm,l);n&&(l[1]=a.height()-l[1]);p.scroll_to(h,l)};e.loaded?c(e):(this.load_page(h,void 0,c),this.scroll_to(h))}}}},scroll_to:function(a,b){var c=this.pages;if(!(0>a||a>=c.length)){c=c[a].view_position();void 0===b&&(b=[0,0]);var e=this.container;e.scrollLeft+=b[0]-c[0];e.scrollTop+=b[1]-c[1]}},get_current_view_hash:function(){var a=
[],b=this.pages[this.cur_page_idx];a.push(b.num);a.push("XYZ");var c=b.view_position(),c=k(b.ictm,[c[0],b.height()-c[1]]);a.push(c[0]/this.scale);a.push(c[1]/this.scale);a.push(this.scale);return JSON.stringify(a)}};u.Viewer=r})();function getparam(k,n){n=(n+"=").toLowerCase();var p=k.toLowerCase().indexOf(n);if(0>p)return"";k=k.substr(p+n.length);p=k.toLowerCase().indexOf("&");return 0<=p?k.substr(0,p):k}
function g_init_onload(){var k=getparam(location.href,"scale");(k=parseFloat(k))&&!isNaN(k)&&pdf2htmlEX.defaultViewer.rescale(k)}window.addEventListener?window.addEventListener("load",g_init_onload,!1):window.attachEvent&&window.attachEvent("onload",g_init_onload);